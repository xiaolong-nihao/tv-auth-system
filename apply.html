<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾å¤‡æˆæƒè´­ä¹°</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #1e40af 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
        }
        
        .package-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .package-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .package-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .package-card.selected {
            border-color: var(--primary);
            background: #f0f9ff;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .device-info {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            word-break: break-all;
        }
        
        .contact-info {
            background: #f0fdf4;
            border: 2px solid #bbf7d0;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“± è®¾å¤‡æˆæƒè´­ä¹°</h1>
            <p>é€‰æ‹©å¥—é¤å¹¶è·å–è®¾å¤‡æŒ‡çº¹ï¼Œè”ç³»ç®¡ç†å‘˜å¼€é€šæˆæƒ</p>
        </div>
        
        <div class="main-content">
            <!-- è®¾å¤‡ä¿¡æ¯æ˜¾ç¤º -->
            <div class="card">
                <h3>æ‚¨çš„è®¾å¤‡ä¿¡æ¯</h3>
                <div class="device-info">
                    <strong>è®¾å¤‡æŒ‡çº¹ï¼š</strong>
                    <div id="deviceFingerprint" style="margin: 10px 0; font-size: 14px;"></div>
                    <button class="btn btn-primary" onclick="copyFingerprint()">
                        ğŸ“‹ å¤åˆ¶è®¾å¤‡æŒ‡çº¹
                    </button>
                </div>
            </div>

            <!-- å¥—é¤é€‰æ‹© -->
            <div class="card">
                <h3>é€‰æ‹©æˆæƒå¥—é¤</h3>
                <div class="package-grid">
                    <div class="package-card" onclick="selectPackage('monthly', 30)">
                        <h4>æœˆå¡å¥—é¤</h4>
                        <div style="font-size: 24px; color: var(--primary); margin: 10px 0;">Â¥30</div>
                        <p>30å¤©æˆæƒ</p>
                        <div style="color: #64748b; font-size: 14px; margin-top: 10px;">
                            ğŸ“… 30å¤©ä½¿ç”¨æƒé™<br>
                            ğŸ”„ å…è´¹æ›´æ–°<br>
                            ğŸ“§ æŠ€æœ¯æ”¯æŒ
                        </div>
                    </div>
                    
                    <div class="package-card" onclick="selectPackage('quarterly', 90)">
                        <h4>å­£å¡å¥—é¤</h4>
                        <div style="font-size: 24px; color: var(--primary); margin: 10px 0;">Â¥80</div>
                        <p>90å¤©æˆæƒ</p>
                        <div style="color: #64748b; font-size: 14px; margin-top: 10px;">
                            ğŸ“… 90å¤©ä½¿ç”¨æƒé™<br>
                            ğŸ”„ å…è´¹æ›´æ–°<br>
                            ğŸ“§ ä¼˜å…ˆæŠ€æœ¯æ”¯æŒ<br>
                            ğŸ’° çœ Â¥10
                        </div>
                    </div>
                    
                    <div class="package-card" onclick="selectPackage('yearly', 365)">
                        <h4>å¹´å¡å¥—é¤</h4>
                        <div style="font-size: 24px; color: var(--primary); margin: 10px 0;">Â¥280</div>
                        <p>365å¤©æˆæƒ</p>
                        <div style="color: #64748b; font-size: 14px; margin-top: 10px;">
                            ğŸ“… 365å¤©ä½¿ç”¨æƒé™<br>
                            ğŸ”„ å…è´¹æ›´æ–°<br>
                            ğŸ“§ ä¸“å±æŠ€æœ¯æ”¯æŒ<br>
                            ğŸ çœ Â¥80
                        </div>
                    </div>
                </div>
            </div>

            <!-- è”ç³»ä¿¡æ¯ -->
            <div class="card">
                <h3>è”ç³»ç®¡ç†å‘˜å¼€é€š</h3>
                <div class="contact-info">
                    <p>è¯·å°†ä»¥ä¸‹ä¿¡æ¯å‘é€ç»™ç®¡ç†å‘˜ï¼š</p>
                    <div style="margin: 15px 0;">
                        <strong>è®¾å¤‡æŒ‡çº¹ï¼š</strong> <span id="displayFingerprint"></span><br>
                        <strong>é€‰æ‹©å¥—é¤ï¼š</strong> <span id="selectedPackage">æœªé€‰æ‹©</span><br>
                        <strong>æˆæƒå¤©æ•°ï¼š</strong> <span id="selectedDays">0</span> å¤©
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>ç®¡ç†å‘˜è”ç³»æ–¹å¼ï¼š</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                            <button class="btn" onclick="copyToWechat()" style="background: #07c160; color: white;">
                                ğŸ’¬ å¤åˆ¶å¾®ä¿¡ä¿¡æ¯
                            </button>
                            <button class="btn" onclick="copyToQQ()" style="background: #12b7f5; color: white;">
                                ğŸ’™ å¤åˆ¶QQä¿¡æ¯
                            </button>
                            <button class="btn" onclick="copyToEmail()" style="background: #ea4335; color: white;">
                                ğŸ“§ å¤åˆ¶é‚®ä»¶å†…å®¹
                            </button>
                            <button class="btn" onclick="generateOrderImage()" style="background: var(--warning); color: white;">
                                ğŸ–¼ï¸ ç”Ÿæˆè®¢å•å›¾ç‰‡
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è´­ä¹°è®°å½• -->
            <div class="card">
                <h3>è´­ä¹°è®°å½•</h3>
                <div id="orderHistory">
                    <p style="color: #64748b; text-align: center;">æš‚æ— è´­ä¹°è®°å½•</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç”¨æˆ·é€‰æ‹©çš„å¥—é¤
        let selectedPackage = null;
        let selectedDays = 0;
        let deviceFingerprint = '';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            await generateDeviceFingerprint();
            loadOrderHistory();
        });

        // ç”Ÿæˆè®¾å¤‡æŒ‡çº¹
        async function generateDeviceFingerprint() {
            const components = [
                navigator.userAgent,
                navigator.platform,
                navigator.language,
                screen.width + 'x' + screen.height,
                new Date().getTimezoneOffset().toString(),
                navigator.hardwareConcurrency || 'unknown'
            ];
            
            const fingerprintString = components.join('|');
            const hashBuffer = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(fingerprintString));
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            deviceFingerprint = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            
            document.getElementById('deviceFingerprint').textContent = deviceFingerprint;
            document.getElementById('displayFingerprint').textContent = deviceFingerprint;
        }

        // é€‰æ‹©å¥—é¤
        function selectPackage(pkgType, days) {
            // ç§»é™¤ä¹‹å‰çš„é€‰æ‹©
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // è®¾ç½®æ–°çš„é€‰æ‹©
            event.currentTarget.classList.add('selected');
            selectedPackage = pkgType;
            selectedDays = days;
            
            document.getElementById('selectedPackage').textContent = getPackageName(pkgType);
            document.getElementById('selectedDays').textContent = days;
        }

        // è·å–å¥—é¤åç§°
        function getPackageName(pkgType) {
            const names = {
                'monthly': 'æœˆå¡å¥—é¤',
                'quarterly': 'å­£å¡å¥—é¤',
                'yearly': 'å¹´å¡å¥—é¤'
            };
            return names[pkgType] || pkgType;
        }

        // å¤åˆ¶è®¾å¤‡æŒ‡çº¹
        function copyFingerprint() {
            navigator.clipboard.writeText(deviceFingerprint).then(() => {
                alert('è®¾å¤‡æŒ‡çº¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }

        // å¤åˆ¶å¾®ä¿¡ä¿¡æ¯
        function copyToWechat() {
            if (!selectedPackage) {
                alert('è¯·å…ˆé€‰æ‹©å¥—é¤');
                return;
            }
            
            const message = `è®¾å¤‡æˆæƒè´­ä¹°ç”³è¯·ï¼š
è®¾å¤‡æŒ‡çº¹ï¼š${deviceFingerprint}
é€‰æ‹©å¥—é¤ï¼š${getPackageName(selectedPackage)}
æˆæƒå¤©æ•°ï¼š${selectedDays}å¤©
è´­ä¹°æ—¶é—´ï¼š${new Date().toLocaleString()}`;
            
            navigator.clipboard.writeText(message).then(() => {
                alert('è´­ä¹°ä¿¡æ¯å·²å¤åˆ¶ï¼Œè¯·å‘é€ç»™å¾®ä¿¡ç®¡ç†å‘˜');
            });
        }

        // å¤åˆ¶QQä¿¡æ¯
        function copyToQQ() {
            copyToWechat(); // å¤ç”¨ç›¸åŒé€»è¾‘
        }

        // å¤åˆ¶é‚®ä»¶å†…å®¹
        function copyToEmail() {
            if (!selectedPackage) {
                alert('è¯·å…ˆé€‰æ‹©å¥—é¤');
                return;
            }
            
            const subject = `è®¾å¤‡æˆæƒè´­ä¹°ç”³è¯· - ${getPackageName(selectedPackage)}`;
            const body = `å°Šæ•¬çš„ç®¡ç†å‘˜ï¼š

æˆ‘æƒ³è´­ä¹°è®¾å¤‡æˆæƒæœåŠ¡ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š

è®¾å¤‡æŒ‡çº¹ï¼š${deviceFingerprint}
é€‰æ‹©å¥—é¤ï¼š${getPackageName(selectedPackage)}
æˆæƒå¤©æ•°ï¼š${selectedDays}å¤©
è´­ä¹°æ—¶é—´ï¼š${new Date().toLocaleString()}

è¯·å®¡æ ¸å¹¶å¼€é€šæˆæƒï¼Œè°¢è°¢ï¼

æ­¤è‡´
æ•¬ç¤¼`;
            
            const mailtoLink = `mailto:admin@example.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
        }

        // ç”Ÿæˆè®¢å•å›¾ç‰‡
        function generateOrderImage() {
            if (!selectedPackage) {
                alert('è¯·å…ˆé€‰æ‹©å¥—é¤');
                return;
            }
            
            // è¿™é‡Œå¯ä»¥é›†æˆäºŒç»´ç ç”Ÿæˆåº“
            const orderInfo = {
                fingerprint: deviceFingerprint,
                package: selectedPackage,
                days: selectedDays,
                timestamp: new Date().toISOString()
            };
            
            const orderString = JSON.stringify(orderInfo);
            alert('è®¢å•ä¿¡æ¯å·²ç”Ÿæˆï¼š\n' + orderString + '\n\nè¯·æˆªå›¾ä¿å­˜å¹¶å‘é€ç»™ç®¡ç†å‘˜');
        }

        // åŠ è½½è®¢å•å†å²
        function loadOrderHistory() {
            const history = JSON.parse(localStorage.getItem('orderHistory') || '[]');
            const historyDiv = document.getElementById('orderHistory');
            
            if (history.length === 0) {
                return;
            }
            
            historyDiv.innerHTML = '';
            history.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.style.cssText = `
                    background: #f8fafc;
                    padding: 15px;
                    border-radius: 8px;
                    margin: 10px 0;
                    border-left: 4px solid var(--primary);
                `;
                orderElement.innerHTML = `
                    <strong>${getPackageName(order.package)}</strong>
                    <div style="font-size: 12px; color: #64748b;">
                        å¤©æ•°: ${order.days}å¤© | æ—¶é—´: ${new Date(order.timestamp).toLocaleString()}
                    </div>
                    <div style="font-size: 11px; color: #94a3b8; margin-top: 5px;">
                        è®¾å¤‡æŒ‡çº¹: ${order.fingerprint.substring(0, 16)}...
                    </div>
                `;
                historyDiv.appendChild(orderElement);
            });
        }

        // ä¿å­˜è®¢å•è®°å½•
        function saveOrder() {
            if (!selectedPackage) return;
            
            const order = {
                fingerprint: deviceFingerprint,
                package: selectedPackage,
                days: selectedDays,
                timestamp: new Date().toISOString()
            };
            
            const history = JSON.parse(localStorage.getItem('orderHistory') || '[]');
            history.unshift(order);
            localStorage.setItem('orderHistory', JSON.stringify(history));
            
            loadOrderHistory();
        }

        // ä¸ºæŒ‰é’®æ·»åŠ ä¿å­˜åŠŸèƒ½
        document.querySelectorAll('.btn').forEach(btn => {
            if (btn.textContent.includes('å¤åˆ¶') || btn.textContent.includes('ç”Ÿæˆ')) {
                btn.addEventListener('click', saveOrder);
            }
        });
    </script>
</body>
</html>
